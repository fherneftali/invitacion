<!DOCTYPE HTML>
<html>
    <head>
        <title>Nuestra Boda - B|J</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Invitaciones para eventos">
        <meta name="author" content="Desarrollado por Fher Valenzuela - fherneftali.fj@gmail.com">
        <meta name="slug" content="nuestraboda">
        <meta property="og:title" content="Beatriz&Josué">
        <meta property="og:type" content="article">
        <meta property="og:url" content="https://invitacion-marla.000webhostapp.com/images/marla8.jpeg">
        <meta property="og:description" content="Nuestra boda">
        <meta property="og:image" content="https://invitacion-marla.000webhostapp.com/images/marla8.jpeg">
        <meta property="og:image:type" content="image/jpeg" />
        <meta property="og:image:width" content="400">
        <meta property="og:image:height" content="300">
        <link rel="stylesheet" href="assets/css/main.css" />
        <link rel="stylesheet" href="assets/css/index.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.1/font/bootstrap-icons.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500&family=Great+Vibes&family=Montserrat:ital,wght@0,200;0,300;0,400;0,700;0,800;0,900;1,300;1,400;1,500;1,800&family=Raleway:wght@300;400;500&display=swap" rel="stylesheet"><body class="is-preload">
    </head>
    <div class="container">
        <div id="preloader" class="hideLoader">
            <img src="images/anillosnegrosfondotrans.gif" class="wow animate__slideInUp" style="visibility: visible; animation-name: slideInUp;">
        </div>
        <!-- Header -->
        <header id="header">
            <nav class="navbar navbar-expand-lg navbar-light">
                <div class="container-fluid" style="justify-content: flex-end">
                    <button class="navbar-toggle" id="btnNav" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item"><a class="nav-link active" href="#intro">Inicio</a></li>
                            <li class="nav-item"><a class="nav-link active" href="#one">Dónde y Cuándo</a></li>
                            <li class="nav-item"><a class="nav-link active" href="#work">Mi familia</a></li>
                            <li class="nav-item"><a class="nav-link active" href="#two">Fotos</a></li>
                            <li class="nav-item"><a class="nav-link active" href="#contact">Confirmar Asistencia</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

        <!-- Intro -->
        <section id="intro" class="main style1 dark fullscreen">
            <div class="content" id="content-intro">
                <header>
                    <div id="div-titulo">
                        <h2 id=titulo>Nuestra boda</h2>
                    </div>
                    <h1 class="titprin nombre">Beatriz <br/> & <br/>Josué</h1>
                    <div id="div-titulo">
                        <h2 id=titulox>¡Estás invitado!</h2>
                        <p>Nos encantaria que seas parte de este momento tan especial para nosotros. ¡Falta poco!</p>
                    </div>
                </header>
                <div onLoad="mostrar_hora()">
                    <div class="row" id="fecha">
                        <div class="col-xs-2 col-sm-3 col-lg-3">
                            <div class="row">
                                <span id="days"></span>
                            </div>
                            <div class="row">
                                <span id="nombreClock">DIAS</span>
                            </div>
                        </div>
                        <div class="col-xs-1 col-sm-1 col-lg-1">
                            <span id="separador">:</span>
                        </div>
                        <div class="col-xs-2 col-sm-2 col-lg-2">
                            <div class="row">
                                <span id="hours"></span>
                            </div>
                            <div class="row">
                                <span id="nombreClock">HORAS</span>
                            </div>
                        </div>
                        <div class="col-xs-1 col-sm-1 col-lg-1">
                            <span id="separador">:</span>
                        </div>
                        <div class="col-xs-2 col-sm-2 col-lg-2">
                            <div class="row">
                                <span id="minutes"></span>
                            </div>
                            <div class="row">
                                <span id="nombreClock">MINUTOS</span>
                            </div>
                        </div>
                        <div class="col-xs-1 col-sm-1 col-lg-1">
                            <span id="separador">:</span>
                        </div>
                        <div class="col-xs-2 col-sm-2 col-lg-2">
                            <div class="row">
                                <span id="seconds"></span>
                            </div>
                            <div class="row">
                                <span id="nombreClock">SEGUNDOS</span>
                            </div>
                        </div>
                    </div>
                </div>
                <footer>
                    <a href="#one" class="button style2 down">More</a>
                </footer>
        </section>

        <!-- One -->
        <section id="one" class="main style2 dark fullscreen">
            <header style="text-align: center;">
                <a href="" class="agregar-btn" id="agregarCalendario"><i class="fas fa-calendar-alt"> </i> Agendar Recordatorio</a>
                <p class="direccion">Te esperamos en <br> <span id="lugar">La Finca</span></p>
                <p class="direccion">Carr. Mochis-Topo, km. 4.6, <br> Los Mochis, Sin.</p>
                <img src="images/anillosnegrosfondotrans.gif" class="wow animate__slideInUp" style="width: 90px; visibility: visible; animation-name: slideInUp;">
                <p style="font-weight: 600; font-size:1.5rem; padding: 0; margin-top: 0; color: #362536; letter-spacing: 2px;">CEREMONIA</p>
            </header>
            <div class="cont-reception">
                <div id="cuando">
                    <div>
                        <p class="fecha">17 NOV</p>
                    </div>
                    <div>
                        <img src="images/barra.png" style="height: 10vh;">
                    </div>
                    <div>
                        <p class="fecha">19:00 <span>P.M.</span></p>
                    </div>
                </div>
                <header style="text-align: center;">
                    <img src="images/copas.gif" class="wow animate__slideInUp" style="width: 90px; visibility: visible; animation-name: slideInUp;">
                    <p style="font-weight: 600; font-size:1.5rem; padding: 0; margin-top: 0; color: #362536; letter-spacing: 2px;">CELEBRACIÓN</p>
                </header>
                <div class="cont-reception">
                    <div id="cuando">
                        <div>
                            <p class="fecha">17 NOV</p>
                        </div>
                        <div>
                            <img src="images/barra.png" style="height: 10vh;">
                        </div>
                        <div>
                            <p class="fecha">20:00 <span>P.M.</span></p>
                        </div>
                    </div>
                <a href="https://goo.gl/maps/6inC2i4NQXr3pnJv9" id="verMapa" class="btn small rounded" style="border-radius: 8px; margin-right: 0px; margin-bottom: 5vh" target="_blank">VER UBICACIÓN </a>
                <header style="text-align: center;">
                    <img src="images/clothes.png" class="wow animate__slideInUp" style="width: 70px; visibility: visible; animation-name: slideInUp;">
                    <p style="font-weight: 600; font-size:1.5rem; padding: 0; margin-top: 0; color: #362536; letter-spacing: 2px;">DRESSCODE</p>
                </header>
                <p id="dresscode">Formal • No niños </p>
            </div>
            <a href="#two" class="button style2 down anchored">Next</a>
        </section>

        <!-- Work -->
        <section id="work" class="main style3 primary">
            <div class="content cont-family">
                <!-- Gallery  -->
                <div class="gallery1">
                    <header style="text-align: center;">
                        <img src="images/galeria.gif" class="wow animate__slideInUp" class="wow animate__slideInUp" style="width: 90px; visibility: visible; animation-name: slideInUp;">
                        <p style="font-weight: 600; font-size:1.5rem; padding: 0; margin-top: 0; color: #ffffff; letter-spacing: 2px;">COMPARTE FOTOS</p>
                        <p style="font-size:1.1rem; padding: 0; margin-top: 0; color: #ffffff;">Sube fotos de la boda al álbum</p>
                    </header>
                    <input type="file" id="imageFile" accept="image/*" multiple />
                    <button type="button" id="subirfoto" class="btn btn-sm rounded" style="background-color: transparent !important ; color: white; border-color: white; width: 200px; border-radius: 7px; margin-bottom: 2vh;">SUBIR FOTO</button>
                    <button type="button" id="verfotos" class="btn btn-sm rounded" style="background-color: transparent !important ; color: white; border-color: white; width: 200px; border-radius: 7px">VER FOTOS SUBIDAS</a>
                </div>
            </div>
        </section>

        <!-- Two -->
        <section id="two" class="main style2 left dark fullscreen">
            <header style="text-align: center;">
                <img src="images/regalos.gif" class="wow animate__slideInUp" style="width: 70px; visibility: visible; animation-name: slideInUp;">
                <p style="font-weight: 600; font-size:1.5rem; padding: 0; margin-top: 0; color: #362536; letter-spacing: 2px;">REGALOS</p>
        </header>
        <p class="direccion">Lo más importante es tu presencia, <br> pero si deseas hacernos un regalo sera en <br>Efectivo.<br><i class="bi bi-envelope"></i></p>
        </section>

        <!-- Contact -->
        <section id="contact" class="main style3 secondary">
            <div class="content">
                <header>
                    <p style="font-weight: 600; font-size:1.5rem; padding-top: 3vh; margin-top: 0; color: #362536; letter-spacing: 2px;">CONFIRMAR <br>ASISTENCIA</p>
                    <p class="direccion">Por favor confirma tu asistencia</p>
                </header>
                    <form method="post" action="#">
                        <div class="field half" id="fieldRadios">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                                <label class="form-check-label" for="flexRadioDefault1" id="lblckA">
                                Sí, allí estaré!
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                                <label class="form-check-label" for="flexRadioDefault2" id="lblckNa">
                                No podré asistir
                                </label>
                            </div>
                        </div>
                        <div class="fields" style="font-family: 'Trirong', serif; color:#362915">
                            <div class="field half"><input id="nombre" type="text" name="name" placeholder="Nombre y Apellido" onkeyup="validaNombre()" /></div>
                            <div class="field"><textarea name="message" id="message" placeholder="Mensaje para los novios" rows="4"></textarea></div>
                        </div>
                        <ul class="actions special">
                            <li><button id="btnConfirma" class="btn small rounded" type="button" disabled>ENVIAR RESPUESTA</button></li>
                        </ul>
                        <div class="alert alert-danger align-items-center" id="alerta" role="alert">
                            <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                            <div>
                                Ingresa tu nombre y confirma tu respuesta
                            </div>
                        </div>
                    </form>
            </div>
        </section>

        <!-- Footer -->
        <footer id="footer">

            <!-- Icons -->
            <ul class="icons">
                <li><a href="https://www.facebook.com/fherneftali/" target="_blank" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
                <li><a href="https://www.instagram.com/fherneftalivalenzuela/" target="_blank" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
            </ul>

            <!-- Menu -->
            <ul class="menu">
                <li>Design: <a href="https://www.facebook.com/fherneftali/" target="_blank">Fher Valenzuela</a></li>
            </ul>

        </footer>

        <!-- Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="staticBackdropLabel">FOTOS DE LA BODA</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" style="padding: 1rem 2rem; text-align: center;">
                        <div id="containerFotos">
                            <!-- <a href="https://weddingfy.app/dianayroberto/fotos/4.jpeg">
                                <img class="foto" src="https://weddingfy.app/dianayroberto/fotos/4.jpeg">
                            </a> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="oculto">
        <img src="images/colorlib-error-404-4.png">
    </div>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="sweetalert2.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.poptrox.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/reloj.js"></script>
    <script src="assets/js/addrecordatorio.js"></script>
    <script>
        function enviarMensaje() {
            const msj1 = 'confirma que asistirá a los XV de Marla';
            const msj2 = 'Confirmo que asistiré a los XV de Marla';
            const msj3 = 'NO podrá asistir a los XV de Marla';
            const msj4 = 'NO podré asistir a los XV de Marla';
            if ($("#nombre").val() != '') {
                if ($("#flexRadioDefault1").is(':checked') == true) {
                    if ($("#nombre").val() == "" || $("#nombre").val() == null) {
                        window.open('https://wa.me/5216681210104/?text=' + msj2);
                    } else {
                        window.open('https://wa.me/5216681210104/?text=' + $("#nombre").val() + ' ' + msj1);
                    }
                } else if ($("#flexRadioDefault2").is(':checked') == true) {
                    if ($("#nombre").val() == "" || $("#nombre").val() == null) {
                        window.open('https://wa.me/5216681210104/?text=' + msj4);
                    } else {
                        window.open('https://wa.me/5216681210104/?text=' + $("#nombre").val() + ' ' + msj3);
                    }
                }
            } else {

            }
        }

        function validaNombre() {
            console.log($("#nombre").val());
            if ($("#nombre").val() != '') {
                $("#alerta").css('display', 'none');
                $("#btnConfirma").prop('disabled', false);
            } else {
                $("#alerta").css('display', 'flex');
            }
        }

        $("#subirfoto").on('click', function(){
            $("#imageFile").css('display', 'block');
        });
    </script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, getRedirectResult } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
        import { getStorage, ref, uploadBytes, getDownloadURL, listAll } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-storage.js";
        import { getFirestore, doc, addDoc, getDoc, collection, getDocs } from 'https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js'
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCTRHMSngXyt-PYUIV3kdGtrJOel5SWPf4",
            authDomain: "invitacionjb.firebaseapp.com",
            projectId: "invitacionjb",
            storageBucket: "invitacionjb.appspot.com",
            messagingSenderId: "877651846620",
            appId: "1:877651846620:web:a9ba35cc7f9a08d0909b19",
            measurementId: "G-MVSHF14Y1W"
        };
        const firebaseApp = initializeApp(firebaseConfig);
        const auth = getAuth(firebaseApp);
        const storage = getStorage();
        const db = getFirestore(firebaseApp);
        const storageRef = ref(storage);
        const listRef = ref(storage, 'images/');
        //const docRef = doc(db, "confirmaciones", "wLJ6F3MhTiDPwTJLeChP");
        

        function handleFileSelect(evt) {
            $("#preloader").removeClass("hideLoader");
            $("#preloader").addClass("showLoader");
            evt.stopPropagation();
            evt.preventDefault();
            var file = evt.target.files[0];
            var metadata = {
            'contentType': file.type
            };

            // Push to child path.
            const imagesRef = ref(storageRef, 'images/');
            const fileRef = ref(imagesRef, file.name);
            uploadBytes(fileRef, file).then(function(snapshot) {
                console.log('Uploaded', snapshot.totalBytes, 'bytes.');
                console.log('File metadata:', snapshot.metadata);
                $("#preloader").removeClass("showLoader");
                $("#preloader").addClass("hideLoader");
                Swal.fire('Foto Guardada');
                document.getElementById('imageFile').value="";
                // Let's get a download URL for the file.
                // getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {
                //     console.log('File available at', downloadURL);
                //     document.getElementById('linkbox').innerHTML = '<a href="' +  downloadURL + '">Click For File</a>';
                // });
            }).catch(function(error) {
                console.error('Upload failed:', error);
                $("#preloader").removeClass("showLoader");
                $("#preloader").addClass("hideLoader");
                Swal.fire('Ha ocurrido un error al cargar la foto');
            });
        }

        window.onload = async () => {
            if(screen.width > 736){
                $(".container").css("display","none");
                $(".oculto").css("display","block");
            } else{
                document.getElementById('imageFile').addEventListener('change', handleFileSelect, false);
                document.getElementById('imageFile').disabled = true;

                auth.onAuthStateChanged(function(user) {
                if (user) {
                    console.log('Anonymous user signed-in.', user);
                    document.getElementById('imageFile').disabled = false;
                } else {
                    console.log('No hubo ninguna sesión anónima. Creando un nuevo usuario anónimo.');
                    // Sign the user in anonymously since accessing Storage requires the user to be authorized.
                    signInAnonymously(auth).catch((error) => {
                    if (error.code === 'auth/operation-not-allowed') {
                        window.alert('Anonymous Sign-in failed. Please make sure that you have enabled anonymous ' +
                            'sign-in on your Firebase project.');
                    }
                    });
                }
                });

                //Obtener un documento
                /*const docSnap = getDoc(docRef);
                if(docSnap.exists) {
                    console.log("Document data:", docSnap.data());
                } else {
                    // doc.data() will be undefined in this case
                    console.log("No such document!");
                }*/

                //Obtener todos los documentos de la coleccion
                const querySnapshot = await getDocs(collection(db, "confirmaciones"));
                querySnapshot.forEach((doc) => {
                    // doc.data() is never undefined for query doc snapshots
                    console.log(doc.id, " => ", doc.data());
                });
            }
        }

        $("#btnConfirma").on('click', async function(){
            $("#preloader").removeClass("hideLoader");
            $("#preloader").addClass("showLoader");
            var asiste;
            if ($("#nombre").val() != '') {
                if ($("#flexRadioDefault1").is(':checked') == true) {
                    asiste='si';
                } else if ($("#flexRadioDefault2").is(':checked') == true) {
                    asiste='no';
                }
            } else {

            }
            const docRef = await addDoc(collection(db, "confirmaciones"), {
                asistencia: asiste,
                nombre: $("#nombre").val(),
                mensaje: $('#message').val(), 
            });
            if(asiste =='si'){
                Swal.fire(`${$("#nombre").val()} has confirmado tu asistencia`,'¡Preparate para el gran día!', 'success');
            } else {
                Swal.fire(`Gracias por tu respuesta ${$("#nombre").val()}`,'', 'success');
            }
            $("#preloader").removeClass("showLoader");
            $("#preloader").addClass("hideLoader");
        });

        $("#verfotos").on('click', function(){
            $("#preloader").removeClass("hideLoader");
            $("#preloader").addClass("showLoader");
            var downloadURL='';
            $("#containerFotos").empty();
            listAll(listRef)
            .then((res) => {
                res.prefixes.forEach((folderRef) => {
                    console.log(folderRef);
                });
                res.items.forEach((itemRef) => {
                    const starsRef= ref(storage, `gs://${itemRef.bucket}/${itemRef.fullPath}`);
                    getDownloadURL(starsRef)
                    .then((url) => {
                        var afotos ='';
                        afotos = `<a href="${url}" target="_blank"><img class="foto" src="${url}"></a>`;
                        $("#popupFoto>img").attr("src",url);
                        $("#containerFotos").append(afotos);
                    })
                    .catch((error) => {    
                        console.log(error);
                    });
                    $("#staticBackdrop").modal('show');
                    $("#preloader").removeClass("showLoader");
                    $("#preloader").addClass("hideLoader");
                });
                
            }).catch((error) => {
                console.log(error);
                $("#preloader").removeClass("showLoader");
                $("#preloader").addClass("hideLoader");
                Swal.fire('Ha ocurrido un error al cargar el album');
            });
        });
    
    </script>
</body>
</html>